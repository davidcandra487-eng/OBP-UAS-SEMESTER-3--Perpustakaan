<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Halaman Buku</title>

    <link rel="stylesheet" type="text/css" th:href="@{/css/home.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/table.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/form.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/header.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/button-3d.css}" />

    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src="https://unpkg.com/feather-icons"></script>
    
    <link rel="stylesheet" type="text/css" th:href="@{/css/tetris.css}" />
</head>

<body>
    <canvas></canvas>

    <div class="first-box">
        <h2>Daftar Buku</h2>

        <div th:if="${message}" class="success-message" th:text="${message}"></div>
        <div th:if="${error}" class="error-message" th:text="${error}"></div>

        <section class="wrapper">
            <main class="row title">
                <ul>
                    <li>No</li>
                    <li>ISBN</li>
                    <li>Judul</li>
                    <li>Penulis</li>
                    <li>Tahun Terbit</li>
                    <li>Kode Koleksi</li>
                    <li>Lokasi Rak</li>
                </ul>
            </main>

            <article class="row mahasiswa-row" th:each="bk, no : ${listBuku}">
                <ul>
                    <li th:text="${no.count}"></li>

                    <li>
                        <a th:href="@{/koleksi/buku?id={isbn}(isbn=${bk.isbn})}"
                           th:text="${bk.isbn}"></a>
                    </li>

                    <li th:text="${bk.judul}"></li>
                    <li th:text="${bk.penulis}"></li>
                    <li th:text="${bk.tahunTerbit}"></li>
                    <li th:text="${bk.kodeKoleksi}"></li>
                    <li th:text="${bk.lokasiRak}"></li>
                </ul>
            </article>
        </section>
    </div>

    <div class="second-box">
        <div id="feedback-form">
            <h2 class="header"
                th:text="${bukuRec != null and bukuRec.isbn != null and !bukuRec.isbn.isEmpty()} 
                            ? 'Form Edit Buku (ISBN: ' + ${bukuRec.isbn} + ')' 
                            : 'Form Tambah Buku'">Form Buku
            </h2>

            <form th:action="@{/koleksi/buku/save}" method="post"
                  th:object="${bukuRec}" class="form-group">

                <label for="isbn" class="form-label">ISBN</label>
                <input type="text" id="isbn" name="isbn" 
                       th:value="${bukuRec?.isbn}"
                       th:readonly="${bukuRec?.isbn != null and !bukuRec.isbn.isEmpty()}"
                       required />
                
                <label for="judul" class="form-label">Judul</label>
                <input type="text" id="judul" name="judul"
                       th:value="${bukuRec?.judul}" required />

                <label for="penulis" class="form-label">Penulis</label>
                <input type="text" id="penulis" name="penulis"
                       th:value="${bukuRec?.penulis}" />

                <label for="tahunTerbit" class="form-label">Tahun Terbit</label>
                <input type="number" id="tahunTerbit" name="tahunTerbit"
                       th:value="${bukuRec?.tahunTerbit}" min="1000" max="2100" required />

                <label for="kodeKoleksi" class="form-label">Kode Koleksi</label>
                <input type="text" id="kodeKoleksi" name="kodeKoleksi"
                       th:value="${bukuRec?.kodeKoleksi}" 
                       required
                       th:readonly="${bukuRec?.kodeKoleksi != null and !bukuRec.kodeKoleksi.isEmpty()}" />

                <label for="lokasiRak" class="form-label">Lokasi Rak</label>
                <input type="text" id="lokasiRak" name="lokasiRak"
                       th:value="${bukuRec?.lokasiRak}" />

                <div class="action-buttons">
                    <ul>
                        <li>
                            <button type="submit" name="add" class="action-link" id="btn-add">
                                <i class="fa fa-plus-circle"></i><span>ADD</span>
                            </button>
                        </li>

                        <li>
                            <button type="submit" name="edit" class="action-link" id="btn-edit">
                                <i class="fa fa-pencil"></i><span>EDIT</span>
                            </button>
                        </li>

                        <li>
                            <button type="submit" name="delete" class="action-link" id="btn-delete"
                               onclick="return confirm('Apakah Anda yakin ingin menghapus data buku dengan ISBN ' + this.form.isbn.value + '?');">
                               <i class="fa fa-trash-o"></i><span>DELETE</span>
                            </button>
                        </li>

                        <li>
                            <a th:href="@{/koleksi/buku}" class="action-link" id="btn-new">
                                <i class="fa fa-file-o"></i><span>NEW FORM</span>
                            </a>
                        </li>
                        
                        <li>
                            <a th:href="@{/koleksi}" class="action-link" id="btn-return">
                                <i class="fa fa-reply"></i><span>RETURN</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </form>
        </div>
    </div>

    <script>
        feather.replace();
    </script>
    
    <script type="text/javascript" th:src="@{/js/tetris.js}"></script>
</body>

</html>